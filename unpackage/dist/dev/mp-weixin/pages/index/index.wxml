<view><view class="topTitle">{{"已发现 "+deviceNum+" 个蓝牙设备"}}</view><scroll-view class="deviceListWrap" scroll-y scroll-with-animation><uni-collapse vue-id="1" accordion="true" data-event-opts="{{[['^change',[['onChange']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{deviceList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-collapse-item vue-id="{{('2-'+index)+','+('1')}}" title="{{item.name}}" bind:__l="__l" vue-slots="{{['default','title']}}"><view slot="title">{{item.name}}</view><view>{{"信号强度："+item.RSSI+"dBm("+(100+item.RSSI)+"%)"}}</view><view>{{"UUID："+item.deviceId}}</view><view class="concatBtn"><button size="mini" type="primary" data-event-opts="{{[['tap',[['connetBlue',[0,index]]]]]}}" bindtap="__e">连接设备</button></view></uni-collapse-item></block></uni-collapse></scroll-view><view class="connectedStatus"><button style="margin:20rpx 0;" size="defult" type="primary" data-event-opts="{{[['tap',[['initBluetoothModule',['$event']]]]]}}" bindtap="__e">开始扫描</button><button style="margin:20rpx 0;" size="defult" type="defult" data-event-opts="{{[['tap',[['closeBluetoothAdapter',['$event']]]]]}}" bindtap="__e">停止扫描</button><block wx:if="{{connected}}"><view class="nowConcat">{{"已连接到："+connectedName}}</view></block><block wx:if="{{prevConnected}}"><view><view class="npConcat">{{"上次连接："+pDeviceInfo.name}}</view><button size="defult" type="defult" data-event-opts="{{[['tap',[['connetBlue',[1,-1]]]]]}}" bindtap="__e">直接连接</button></view></block><block wx:if="{{connected}}"><view class="nowConcat"><button style="margin:20rpx 0;" size="defult" type="defult" data-event-opts="{{[['tap',[['getBLEDeviceServices',['$event']]]]]}}" bindtap="__e">测试打印</button></view></block></view></view>